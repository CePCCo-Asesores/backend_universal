# backend/routes.yaml - COMPATIBLE con tu index.php
# Rutas existentes + Sistema de autenticación integrado

# =================
# AUTENTICACIÓN
# =================
"/auth/google":
  controller: "AuthController"
  action: "googleAuth"

"/auth/google/callback":
  controller: "AuthController"
  action: "googleCallback"

"/auth/logout":
  controller: "AuthController"
  action: "logout"

"/auth/me":
  controller: "AuthController"
  action: "me"

"/auth/status":
  controller: "AuthController"
  action: "status"

"/auth/usage":
  controller: "AuthController"
  action: "usage"

# =================
# MÓDULOS EXISTENTES
# =================
"/module/activate":
  controller: "ModuleController"
  action: "activate"

"/module/registerUser":
  controller: "ModuleController"
  action: "registerUser"

# =================
# HEALTH & METRICS (públicas)
# =================
"/health":
  controller: "HealthController"
  action: "ping"

"/health/database":
  controller: "HealthController"
  action: "database"

"/health/cache":
  controller: "HealthController"
  action: "cache"

"/metrics":
  controller: "MetricsController"
  action: "summary"

# =================
# UNIVERSAL ENGINE (contratos y ejecución)
# =================
"/universal/activate":
  controller: "UniversalController"
  action: "activate"

"/universal/run":
  controller: "UniversalController"
  action: "run"

"/universal/contracts":
  controller: "UniversalController"
  action: "listContracts"

"/universal/validate":
  controller: "UniversalController"
  action: "validate"

# =================
# ADIA (endpoints específicos)
# =================
"/adia/generate":
  controller: "AdiaController"
  action: "generate"

"/adia/templates":
  controller: "AdiaController"
  action: "templates"

"/adia/usage":
  controller: "AdiaController"
  action: "usage"

# =================
# PAGOS / WEBHOOKS
# =================
"/payment/webhook/hotmart":
  controller: "PaymentController"
  action: "hotmartWebhook"

"/payment/status":
  controller: "PaymentController"
  action: "status"

# =================
# USUARIOS (área autenticada)
# =================
"/user/me":
  controller: "UserController"
  action: "me"
  authenticated: true

"/user/usage":
  controller: "UserController"
  action: "usage"
  authenticated: true

"/user/api-keys":
  controller: "UserController"
  action: "listApiKeys"
  authenticated: true

"/user/api-keys/add":
  controller: "UserController"
  action: "addApiKey"
  authenticated: true

"/user/profile":
  controller: "UserController"
  action: "getProfile"
  authenticated: true

# =================
# RUTAS TEMPORALES DE SETUP (eliminar después)
# =================
"/setup/database":
  controller: "SetupController"
  action: "initDatabase"

"/setup/health":
  controller: "SetupController"
  action: "health"

"/setup/phpinfo":
  controller: "PhpInfoController"
  action: "info"

# =================
# LAB (opcional, para pruebas)
# =================
"/_lab/google/auth":
  controller: "GoogleLabController"
  action: "auth"

"/_lab/google/callback":
  controller: "GoogleLabController"
  action: "callback"
